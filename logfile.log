{"message":"Listening on port 3000","level":"info"}
{"level":"error","message":"Cannot set headers after they are sent to the clientCannot set headers after they are sent to the client","stack":"Error [ERR_HTTP_HEADERS_SENT]: Cannot set headers after they are sent to the client\n    at ServerResponse.setHeader (_http_outgoing.js:467:11)\n    at ServerResponse.header (/Users/marymaciejewski/git/node/vidly/node_modules/express/lib/response.js:767:10)\n    at ServerResponse.send (/Users/marymaciejewski/git/node/vidly/node_modules/express/lib/response.js:170:12)\n    at send (/Users/marymaciejewski/git/node/vidly/middleware/auth.js:14:25)\n    at newFn (/Users/marymaciejewski/git/node/vidly/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/Users/marymaciejewski/git/node/vidly/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/marymaciejewski/git/node/vidly/node_modules/express/lib/router/route.js:137:13)\n    at Route.dispatch (/Users/marymaciejewski/git/node/vidly/node_modules/express/lib/router/route.js:112:3)\n    at newFn (/Users/marymaciejewski/git/node/vidly/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/Users/marymaciejewski/git/node/vidly/node_modules/express/lib/router/layer.js:95:5)"}
{"message":"Connected to mongodb://localhost/vidly_tests...","level":"info"}
{"message":"Listening on port 3000","level":"info"}
{"message":"Connected to mongodb://localhost/vidly_tests...","level":"info"}
{"level":"error","message":"Cannot set headers after they are sent to the clientCannot set headers after they are sent to the client","stack":"Error [ERR_HTTP_HEADERS_SENT]: Cannot set headers after they are sent to the client\n    at ServerResponse.setHeader (_http_outgoing.js:467:11)\n    at ServerResponse.header (/Users/marymaciejewski/git/node/vidly/node_modules/express/lib/response.js:767:10)\n    at ServerResponse.send (/Users/marymaciejewski/git/node/vidly/node_modules/express/lib/response.js:170:12)\n    at send (/Users/marymaciejewski/git/node/vidly/middleware/auth.js:14:25)\n    at newFn (/Users/marymaciejewski/git/node/vidly/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/Users/marymaciejewski/git/node/vidly/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/marymaciejewski/git/node/vidly/node_modules/express/lib/router/route.js:137:13)\n    at Route.dispatch (/Users/marymaciejewski/git/node/vidly/node_modules/express/lib/router/route.js:112:3)\n    at newFn (/Users/marymaciejewski/git/node/vidly/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/Users/marymaciejewski/git/node/vidly/node_modules/express/lib/router/layer.js:95:5)"}
{"message":"Cast to ObjectId failed for value \"12345\" at path \"_id\" for model \"Genre\"Cast to ObjectId failed for value \"12345\" at path \"_id\" for model \"Genre\"","name":"CastError","stringValue":"\"12345\"","kind":"ObjectId","value":"12345","path":"_id","level":"error","stack":"CastError: Cast to ObjectId failed for value \"12345\" at path \"_id\" for model \"Genre\"\n    at new CastError (/Users/marymaciejewski/git/node/vidly/node_modules/mongoose/lib/error/cast.js:29:11)\n    at ObjectId.Object.<anonymous>.ObjectId.cast (/Users/marymaciejewski/git/node/vidly/node_modules/mongoose/lib/schema/objectid.js:242:11)\n    at ObjectId.Object.<anonymous>.SchemaType.applySetters (/Users/marymaciejewski/git/node/vidly/node_modules/mongoose/lib/schematype.js:894:12)\n    at ObjectId.Object.<anonymous>.SchemaType._castForQuery (/Users/marymaciejewski/git/node/vidly/node_modules/mongoose/lib/schematype.js:1297:15)\n    at ObjectId.Object.<anonymous>.SchemaType.castForQuery (/Users/marymaciejewski/git/node/vidly/node_modules/mongoose/lib/schematype.js:1287:15)\n    at ObjectId.Object.<anonymous>.SchemaType.castForQueryWrapper (/Users/marymaciejewski/git/node/vidly/node_modules/mongoose/lib/schematype.js:1266:15)\n    at cast (/Users/marymaciejewski/git/node/vidly/node_modules/mongoose/lib/cast.js:307:32)\n    at model.Query.Object.<anonymous>.Query.cast (/Users/marymaciejewski/git/node/vidly/node_modules/mongoose/lib/query.js:4433:12)\n    at castQuery (/Users/marymaciejewski/git/node/vidly/node_modules/mongoose/lib/query.js:4277:18)\n    at model.Query.Object.<anonymous>.Query._findAndModify (/Users/marymaciejewski/git/node/vidly/node_modules/mongoose/lib/query.js:3267:23)\n    at model.Query.<anonymous> (/Users/marymaciejewski/git/node/vidly/node_modules/mongoose/lib/query.js:3228:8)\n    at model.Query._wrappedThunk [as _findOneAndRemove] (/Users/marymaciejewski/git/node/vidly/node_modules/mongoose/lib/helpers/query/wrapThunk.js:16:8)\n    at /Users/marymaciejewski/git/node/vidly/node_modules/kareem/index.js:369:33\n    at processTicksAndRejections (internal/process/task_queues.js:81:9)"}
{"level":"error","message":"Cannot set headers after they are sent to the clientCannot set headers after they are sent to the client","stack":"Error [ERR_HTTP_HEADERS_SENT]: Cannot set headers after they are sent to the client\n    at ServerResponse.setHeader (_http_outgoing.js:467:11)\n    at ServerResponse.header (/Users/marymaciejewski/git/node/vidly/node_modules/express/lib/response.js:767:10)\n    at ServerResponse.send (/Users/marymaciejewski/git/node/vidly/node_modules/express/lib/response.js:170:12)\n    at send (/Users/marymaciejewski/git/node/vidly/routes/genres.js:40:9)\n    at processTicksAndRejections (internal/process/task_queues.js:88:5)"}
{"message":"Listening on port 3000","level":"info"}
{"level":"error","message":"Cannot set headers after they are sent to the clientCannot set headers after they are sent to the client","stack":"Error [ERR_HTTP_HEADERS_SENT]: Cannot set headers after they are sent to the client\n    at ServerResponse.setHeader (_http_outgoing.js:467:11)\n    at ServerResponse.header (/Users/marymaciejewski/git/node/vidly/node_modules/express/lib/response.js:767:10)\n    at ServerResponse.send (/Users/marymaciejewski/git/node/vidly/node_modules/express/lib/response.js:170:12)\n    at send (/Users/marymaciejewski/git/node/vidly/middleware/auth.js:14:25)\n    at newFn (/Users/marymaciejewski/git/node/vidly/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/Users/marymaciejewski/git/node/vidly/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/marymaciejewski/git/node/vidly/node_modules/express/lib/router/route.js:137:13)\n    at Route.dispatch (/Users/marymaciejewski/git/node/vidly/node_modules/express/lib/router/route.js:112:3)\n    at newFn (/Users/marymaciejewski/git/node/vidly/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/Users/marymaciejewski/git/node/vidly/node_modules/express/lib/router/layer.js:95:5)"}
{"message":"Connected to mongodb://localhost/vidly_tests...","level":"info"}
{"message":"Connected to mongodb://localhost/vidly_tests...","level":"info"}
{"message":"Listening on port 3000","level":"info"}
{"level":"error","message":"Cannot set headers after they are sent to the clientCannot set headers after they are sent to the client","stack":"Error [ERR_HTTP_HEADERS_SENT]: Cannot set headers after they are sent to the client\n    at ServerResponse.setHeader (_http_outgoing.js:467:11)\n    at ServerResponse.header (/Users/marymaciejewski/git/node/vidly/node_modules/express/lib/response.js:767:10)\n    at ServerResponse.send (/Users/marymaciejewski/git/node/vidly/node_modules/express/lib/response.js:170:12)\n    at send (/Users/marymaciejewski/git/node/vidly/middleware/auth.js:14:25)\n    at newFn (/Users/marymaciejewski/git/node/vidly/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/Users/marymaciejewski/git/node/vidly/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/marymaciejewski/git/node/vidly/node_modules/express/lib/router/route.js:137:13)\n    at Route.dispatch (/Users/marymaciejewski/git/node/vidly/node_modules/express/lib/router/route.js:112:3)\n    at newFn (/Users/marymaciejewski/git/node/vidly/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/Users/marymaciejewski/git/node/vidly/node_modules/express/lib/router/layer.js:95:5)"}
{"message":"Cast to ObjectId failed for value \"12345\" at path \"_id\" for model \"Genre\"Cast to ObjectId failed for value \"12345\" at path \"_id\" for model \"Genre\"","name":"CastError","stringValue":"\"12345\"","kind":"ObjectId","value":"12345","path":"_id","level":"error","stack":"CastError: Cast to ObjectId failed for value \"12345\" at path \"_id\" for model \"Genre\"\n    at new CastError (/Users/marymaciejewski/git/node/vidly/node_modules/mongoose/lib/error/cast.js:29:11)\n    at ObjectId.Object.<anonymous>.ObjectId.cast (/Users/marymaciejewski/git/node/vidly/node_modules/mongoose/lib/schema/objectid.js:242:11)\n    at ObjectId.Object.<anonymous>.SchemaType.applySetters (/Users/marymaciejewski/git/node/vidly/node_modules/mongoose/lib/schematype.js:894:12)\n    at ObjectId.Object.<anonymous>.SchemaType._castForQuery (/Users/marymaciejewski/git/node/vidly/node_modules/mongoose/lib/schematype.js:1297:15)\n    at ObjectId.Object.<anonymous>.SchemaType.castForQuery (/Users/marymaciejewski/git/node/vidly/node_modules/mongoose/lib/schematype.js:1287:15)\n    at ObjectId.Object.<anonymous>.SchemaType.castForQueryWrapper (/Users/marymaciejewski/git/node/vidly/node_modules/mongoose/lib/schematype.js:1266:15)\n    at cast (/Users/marymaciejewski/git/node/vidly/node_modules/mongoose/lib/cast.js:307:32)\n    at model.Query.Object.<anonymous>.Query.cast (/Users/marymaciejewski/git/node/vidly/node_modules/mongoose/lib/query.js:4433:12)\n    at castQuery (/Users/marymaciejewski/git/node/vidly/node_modules/mongoose/lib/query.js:4277:18)\n    at model.Query.Object.<anonymous>.Query._findAndModify (/Users/marymaciejewski/git/node/vidly/node_modules/mongoose/lib/query.js:3267:23)\n    at model.Query.<anonymous> (/Users/marymaciejewski/git/node/vidly/node_modules/mongoose/lib/query.js:3228:8)\n    at model.Query._wrappedThunk [as _findOneAndRemove] (/Users/marymaciejewski/git/node/vidly/node_modules/mongoose/lib/helpers/query/wrapThunk.js:16:8)\n    at /Users/marymaciejewski/git/node/vidly/node_modules/kareem/index.js:369:33\n    at processTicksAndRejections (internal/process/task_queues.js:81:9)"}
{"level":"error","message":"Cannot set headers after they are sent to the clientCannot set headers after they are sent to the client","stack":"Error [ERR_HTTP_HEADERS_SENT]: Cannot set headers after they are sent to the client\n    at ServerResponse.setHeader (_http_outgoing.js:467:11)\n    at ServerResponse.header (/Users/marymaciejewski/git/node/vidly/node_modules/express/lib/response.js:767:10)\n    at ServerResponse.send (/Users/marymaciejewski/git/node/vidly/node_modules/express/lib/response.js:170:12)\n    at send (/Users/marymaciejewski/git/node/vidly/routes/genres.js:40:9)\n    at processTicksAndRejections (internal/process/task_queues.js:88:5)"}
{"message":"Listening on port 3000","level":"info"}
{"level":"error","message":"Cannot set headers after they are sent to the clientCannot set headers after they are sent to the client","stack":"Error [ERR_HTTP_HEADERS_SENT]: Cannot set headers after they are sent to the client\n    at ServerResponse.setHeader (_http_outgoing.js:467:11)\n    at ServerResponse.header (/Users/marymaciejewski/git/node/vidly/node_modules/express/lib/response.js:767:10)\n    at ServerResponse.send (/Users/marymaciejewski/git/node/vidly/node_modules/express/lib/response.js:170:12)\n    at send (/Users/marymaciejewski/git/node/vidly/middleware/auth.js:14:25)\n    at newFn (/Users/marymaciejewski/git/node/vidly/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/Users/marymaciejewski/git/node/vidly/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/marymaciejewski/git/node/vidly/node_modules/express/lib/router/route.js:137:13)\n    at Route.dispatch (/Users/marymaciejewski/git/node/vidly/node_modules/express/lib/router/route.js:112:3)\n    at newFn (/Users/marymaciejewski/git/node/vidly/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/Users/marymaciejewski/git/node/vidly/node_modules/express/lib/router/layer.js:95:5)"}
{"message":"Connected to mongodb://localhost/vidly_tests...","level":"info"}
{"message":"Listening on port 3000","level":"info"}
{"message":"Connected to mongodb://localhost/vidly_tests...","level":"info"}
{"level":"error","message":"Cannot set headers after they are sent to the clientCannot set headers after they are sent to the client","stack":"Error [ERR_HTTP_HEADERS_SENT]: Cannot set headers after they are sent to the client\n    at ServerResponse.setHeader (_http_outgoing.js:467:11)\n    at ServerResponse.header (/Users/marymaciejewski/git/node/vidly/node_modules/express/lib/response.js:767:10)\n    at ServerResponse.send (/Users/marymaciejewski/git/node/vidly/node_modules/express/lib/response.js:170:12)\n    at send (/Users/marymaciejewski/git/node/vidly/middleware/auth.js:14:25)\n    at newFn (/Users/marymaciejewski/git/node/vidly/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/Users/marymaciejewski/git/node/vidly/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/marymaciejewski/git/node/vidly/node_modules/express/lib/router/route.js:137:13)\n    at Route.dispatch (/Users/marymaciejewski/git/node/vidly/node_modules/express/lib/router/route.js:112:3)\n    at newFn (/Users/marymaciejewski/git/node/vidly/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/Users/marymaciejewski/git/node/vidly/node_modules/express/lib/router/layer.js:95:5)"}
{"level":"error","message":"Cannot set headers after they are sent to the clientCannot set headers after they are sent to the client","stack":"Error [ERR_HTTP_HEADERS_SENT]: Cannot set headers after they are sent to the client\n    at ServerResponse.setHeader (_http_outgoing.js:467:11)\n    at ServerResponse.header (/Users/marymaciejewski/git/node/vidly/node_modules/express/lib/response.js:767:10)\n    at ServerResponse.send (/Users/marymaciejewski/git/node/vidly/node_modules/express/lib/response.js:170:12)\n    at send (/Users/marymaciejewski/git/node/vidly/routes/genres.js:40:9)\n    at processTicksAndRejections (internal/process/task_queues.js:88:5)"}
{"message":"Listening on port 3000","level":"info"}
{"level":"error","message":"Cannot set headers after they are sent to the clientCannot set headers after they are sent to the client","stack":"Error [ERR_HTTP_HEADERS_SENT]: Cannot set headers after they are sent to the client\n    at ServerResponse.setHeader (_http_outgoing.js:467:11)\n    at ServerResponse.header (/Users/marymaciejewski/git/node/vidly/node_modules/express/lib/response.js:767:10)\n    at ServerResponse.send (/Users/marymaciejewski/git/node/vidly/node_modules/express/lib/response.js:170:12)\n    at send (/Users/marymaciejewski/git/node/vidly/middleware/auth.js:14:25)\n    at newFn (/Users/marymaciejewski/git/node/vidly/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/Users/marymaciejewski/git/node/vidly/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/marymaciejewski/git/node/vidly/node_modules/express/lib/router/route.js:137:13)\n    at Route.dispatch (/Users/marymaciejewski/git/node/vidly/node_modules/express/lib/router/route.js:112:3)\n    at newFn (/Users/marymaciejewski/git/node/vidly/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/Users/marymaciejewski/git/node/vidly/node_modules/express/lib/router/layer.js:95:5)"}
{"message":"Connected to mongodb://localhost/vidly_tests...","level":"info"}
{"message":"Listening on port 3000","level":"info"}
{"message":"Connected to mongodb://localhost/vidly_tests...","level":"info"}
{"level":"error","message":"Cannot set headers after they are sent to the clientCannot set headers after they are sent to the client","stack":"Error [ERR_HTTP_HEADERS_SENT]: Cannot set headers after they are sent to the client\n    at ServerResponse.setHeader (_http_outgoing.js:467:11)\n    at ServerResponse.header (/Users/marymaciejewski/git/node/vidly/node_modules/express/lib/response.js:767:10)\n    at ServerResponse.send (/Users/marymaciejewski/git/node/vidly/node_modules/express/lib/response.js:170:12)\n    at send (/Users/marymaciejewski/git/node/vidly/middleware/auth.js:14:25)\n    at newFn (/Users/marymaciejewski/git/node/vidly/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/Users/marymaciejewski/git/node/vidly/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/marymaciejewski/git/node/vidly/node_modules/express/lib/router/route.js:137:13)\n    at Route.dispatch (/Users/marymaciejewski/git/node/vidly/node_modules/express/lib/router/route.js:112:3)\n    at newFn (/Users/marymaciejewski/git/node/vidly/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/Users/marymaciejewski/git/node/vidly/node_modules/express/lib/router/layer.js:95:5)"}
{"level":"error","message":"Cannot set headers after they are sent to the clientCannot set headers after they are sent to the client","stack":"Error [ERR_HTTP_HEADERS_SENT]: Cannot set headers after they are sent to the client\n    at ServerResponse.setHeader (_http_outgoing.js:467:11)\n    at ServerResponse.header (/Users/marymaciejewski/git/node/vidly/node_modules/express/lib/response.js:767:10)\n    at ServerResponse.send (/Users/marymaciejewski/git/node/vidly/node_modules/express/lib/response.js:170:12)\n    at send (/Users/marymaciejewski/git/node/vidly/routes/genres.js:40:9)\n    at processTicksAndRejections (internal/process/task_queues.js:88:5)"}
{"message":"Listening on port 3000","level":"info"}
{"level":"error","message":"Cannot set headers after they are sent to the clientCannot set headers after they are sent to the client","stack":"Error [ERR_HTTP_HEADERS_SENT]: Cannot set headers after they are sent to the client\n    at ServerResponse.setHeader (_http_outgoing.js:467:11)\n    at ServerResponse.header (/Users/marymaciejewski/git/node/vidly/node_modules/express/lib/response.js:767:10)\n    at ServerResponse.send (/Users/marymaciejewski/git/node/vidly/node_modules/express/lib/response.js:170:12)\n    at send (/Users/marymaciejewski/git/node/vidly/middleware/auth.js:14:25)\n    at newFn (/Users/marymaciejewski/git/node/vidly/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/Users/marymaciejewski/git/node/vidly/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/marymaciejewski/git/node/vidly/node_modules/express/lib/router/route.js:137:13)\n    at Route.dispatch (/Users/marymaciejewski/git/node/vidly/node_modules/express/lib/router/route.js:112:3)\n    at newFn (/Users/marymaciejewski/git/node/vidly/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/Users/marymaciejewski/git/node/vidly/node_modules/express/lib/router/layer.js:95:5)"}
{"message":"Connected to mongodb://localhost/vidly_tests...","level":"info"}
{"message":"Connected to mongodb://localhost/vidly_tests...","level":"info"}
{"message":"Listening on port 3000","level":"info"}
{"level":"error","message":"Cannot set headers after they are sent to the clientCannot set headers after they are sent to the client","stack":"Error [ERR_HTTP_HEADERS_SENT]: Cannot set headers after they are sent to the client\n    at ServerResponse.setHeader (_http_outgoing.js:467:11)\n    at ServerResponse.header (/Users/marymaciejewski/git/node/vidly/node_modules/express/lib/response.js:767:10)\n    at ServerResponse.send (/Users/marymaciejewski/git/node/vidly/node_modules/express/lib/response.js:170:12)\n    at send (/Users/marymaciejewski/git/node/vidly/middleware/auth.js:14:25)\n    at newFn (/Users/marymaciejewski/git/node/vidly/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/Users/marymaciejewski/git/node/vidly/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/marymaciejewski/git/node/vidly/node_modules/express/lib/router/route.js:137:13)\n    at Route.dispatch (/Users/marymaciejewski/git/node/vidly/node_modules/express/lib/router/route.js:112:3)\n    at newFn (/Users/marymaciejewski/git/node/vidly/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/Users/marymaciejewski/git/node/vidly/node_modules/express/lib/router/layer.js:95:5)"}
{"level":"error","message":"Cannot set headers after they are sent to the clientCannot set headers after they are sent to the client","stack":"Error [ERR_HTTP_HEADERS_SENT]: Cannot set headers after they are sent to the client\n    at ServerResponse.setHeader (_http_outgoing.js:467:11)\n    at ServerResponse.header (/Users/marymaciejewski/git/node/vidly/node_modules/express/lib/response.js:767:10)\n    at ServerResponse.send (/Users/marymaciejewski/git/node/vidly/node_modules/express/lib/response.js:170:12)\n    at send (/Users/marymaciejewski/git/node/vidly/routes/genres.js:40:9)\n    at processTicksAndRejections (internal/process/task_queues.js:88:5)"}
{"message":"Listening on port 3000","level":"info"}
{"level":"error","message":"Cannot set headers after they are sent to the clientCannot set headers after they are sent to the client","stack":"Error [ERR_HTTP_HEADERS_SENT]: Cannot set headers after they are sent to the client\n    at ServerResponse.setHeader (_http_outgoing.js:467:11)\n    at ServerResponse.header (/Users/marymaciejewski/git/node/vidly/node_modules/express/lib/response.js:767:10)\n    at ServerResponse.send (/Users/marymaciejewski/git/node/vidly/node_modules/express/lib/response.js:170:12)\n    at send (/Users/marymaciejewski/git/node/vidly/middleware/auth.js:14:25)\n    at newFn (/Users/marymaciejewski/git/node/vidly/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/Users/marymaciejewski/git/node/vidly/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/marymaciejewski/git/node/vidly/node_modules/express/lib/router/route.js:137:13)\n    at Route.dispatch (/Users/marymaciejewski/git/node/vidly/node_modules/express/lib/router/route.js:112:3)\n    at newFn (/Users/marymaciejewski/git/node/vidly/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/Users/marymaciejewski/git/node/vidly/node_modules/express/lib/router/layer.js:95:5)"}
{"message":"Connected to mongodb://localhost/vidly_tests...","level":"info"}
{"message":"Connected to mongodb://localhost/vidly_tests...","level":"info"}
{"message":"Listening on port 3000","level":"info"}
{"level":"error","message":"Cannot set headers after they are sent to the clientCannot set headers after they are sent to the client","stack":"Error [ERR_HTTP_HEADERS_SENT]: Cannot set headers after they are sent to the client\n    at ServerResponse.setHeader (_http_outgoing.js:467:11)\n    at ServerResponse.header (/Users/marymaciejewski/git/node/vidly/node_modules/express/lib/response.js:767:10)\n    at ServerResponse.send (/Users/marymaciejewski/git/node/vidly/node_modules/express/lib/response.js:170:12)\n    at send (/Users/marymaciejewski/git/node/vidly/middleware/auth.js:14:25)\n    at newFn (/Users/marymaciejewski/git/node/vidly/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/Users/marymaciejewski/git/node/vidly/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/marymaciejewski/git/node/vidly/node_modules/express/lib/router/route.js:137:13)\n    at Route.dispatch (/Users/marymaciejewski/git/node/vidly/node_modules/express/lib/router/route.js:112:3)\n    at newFn (/Users/marymaciejewski/git/node/vidly/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/Users/marymaciejewski/git/node/vidly/node_modules/express/lib/router/layer.js:95:5)"}
{"level":"error","message":"Cannot set headers after they are sent to the clientCannot set headers after they are sent to the client","stack":"Error [ERR_HTTP_HEADERS_SENT]: Cannot set headers after they are sent to the client\n    at ServerResponse.setHeader (_http_outgoing.js:467:11)\n    at ServerResponse.header (/Users/marymaciejewski/git/node/vidly/node_modules/express/lib/response.js:767:10)\n    at ServerResponse.send (/Users/marymaciejewski/git/node/vidly/node_modules/express/lib/response.js:170:12)\n    at send (/Users/marymaciejewski/git/node/vidly/routes/genres.js:40:9)\n    at processTicksAndRejections (internal/process/task_queues.js:88:5)"}
{"message":"Listening on port 3000","level":"info"}
{"level":"error","message":"Cannot set headers after they are sent to the clientCannot set headers after they are sent to the client","stack":"Error [ERR_HTTP_HEADERS_SENT]: Cannot set headers after they are sent to the client\n    at ServerResponse.setHeader (_http_outgoing.js:467:11)\n    at ServerResponse.header (/Users/marymaciejewski/git/node/vidly/node_modules/express/lib/response.js:767:10)\n    at ServerResponse.send (/Users/marymaciejewski/git/node/vidly/node_modules/express/lib/response.js:170:12)\n    at send (/Users/marymaciejewski/git/node/vidly/middleware/auth.js:14:25)\n    at newFn (/Users/marymaciejewski/git/node/vidly/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/Users/marymaciejewski/git/node/vidly/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/marymaciejewski/git/node/vidly/node_modules/express/lib/router/route.js:137:13)\n    at Route.dispatch (/Users/marymaciejewski/git/node/vidly/node_modules/express/lib/router/route.js:112:3)\n    at newFn (/Users/marymaciejewski/git/node/vidly/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/Users/marymaciejewski/git/node/vidly/node_modules/express/lib/router/layer.js:95:5)"}
{"message":"Connected to mongodb://localhost/vidly_tests...","level":"info"}
{"message":"Connected to mongodb://localhost/vidly_tests...","level":"info"}
{"message":"Listening on port 3000","level":"info"}
{"level":"error","message":"Cannot set headers after they are sent to the clientCannot set headers after they are sent to the client","stack":"Error [ERR_HTTP_HEADERS_SENT]: Cannot set headers after they are sent to the client\n    at ServerResponse.setHeader (_http_outgoing.js:467:11)\n    at ServerResponse.header (/Users/marymaciejewski/git/node/vidly/node_modules/express/lib/response.js:767:10)\n    at ServerResponse.send (/Users/marymaciejewski/git/node/vidly/node_modules/express/lib/response.js:170:12)\n    at send (/Users/marymaciejewski/git/node/vidly/middleware/auth.js:14:25)\n    at newFn (/Users/marymaciejewski/git/node/vidly/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/Users/marymaciejewski/git/node/vidly/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/marymaciejewski/git/node/vidly/node_modules/express/lib/router/route.js:137:13)\n    at Route.dispatch (/Users/marymaciejewski/git/node/vidly/node_modules/express/lib/router/route.js:112:3)\n    at newFn (/Users/marymaciejewski/git/node/vidly/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/Users/marymaciejewski/git/node/vidly/node_modules/express/lib/router/layer.js:95:5)"}
{"level":"error","message":"Cannot set headers after they are sent to the clientCannot set headers after they are sent to the client","stack":"Error [ERR_HTTP_HEADERS_SENT]: Cannot set headers after they are sent to the client\n    at ServerResponse.setHeader (_http_outgoing.js:467:11)\n    at ServerResponse.header (/Users/marymaciejewski/git/node/vidly/node_modules/express/lib/response.js:767:10)\n    at ServerResponse.send (/Users/marymaciejewski/git/node/vidly/node_modules/express/lib/response.js:170:12)\n    at send (/Users/marymaciejewski/git/node/vidly/routes/genres.js:40:9)\n    at processTicksAndRejections (internal/process/task_queues.js:88:5)"}
{"message":"Listening on port 3000","level":"info"}
{"level":"error","message":"Cannot set headers after they are sent to the clientCannot set headers after they are sent to the client","stack":"Error [ERR_HTTP_HEADERS_SENT]: Cannot set headers after they are sent to the client\n    at ServerResponse.setHeader (_http_outgoing.js:467:11)\n    at ServerResponse.header (/Users/marymaciejewski/git/node/vidly/node_modules/express/lib/response.js:767:10)\n    at ServerResponse.send (/Users/marymaciejewski/git/node/vidly/node_modules/express/lib/response.js:170:12)\n    at send (/Users/marymaciejewski/git/node/vidly/middleware/auth.js:14:25)\n    at newFn (/Users/marymaciejewski/git/node/vidly/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/Users/marymaciejewski/git/node/vidly/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/marymaciejewski/git/node/vidly/node_modules/express/lib/router/route.js:137:13)\n    at Route.dispatch (/Users/marymaciejewski/git/node/vidly/node_modules/express/lib/router/route.js:112:3)\n    at newFn (/Users/marymaciejewski/git/node/vidly/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/Users/marymaciejewski/git/node/vidly/node_modules/express/lib/router/layer.js:95:5)"}
{"message":"Connected to mongodb://localhost/vidly_tests...","level":"info"}
{"message":"Connected to mongodb://localhost/vidly_tests...","level":"info"}
{"message":"Listening on port 3000","level":"info"}
{"level":"error","message":"Cannot set headers after they are sent to the clientCannot set headers after they are sent to the client","stack":"Error [ERR_HTTP_HEADERS_SENT]: Cannot set headers after they are sent to the client\n    at ServerResponse.setHeader (_http_outgoing.js:467:11)\n    at ServerResponse.header (/Users/marymaciejewski/git/node/vidly/node_modules/express/lib/response.js:767:10)\n    at ServerResponse.send (/Users/marymaciejewski/git/node/vidly/node_modules/express/lib/response.js:170:12)\n    at send (/Users/marymaciejewski/git/node/vidly/middleware/auth.js:14:25)\n    at newFn (/Users/marymaciejewski/git/node/vidly/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/Users/marymaciejewski/git/node/vidly/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/marymaciejewski/git/node/vidly/node_modules/express/lib/router/route.js:137:13)\n    at Route.dispatch (/Users/marymaciejewski/git/node/vidly/node_modules/express/lib/router/route.js:112:3)\n    at newFn (/Users/marymaciejewski/git/node/vidly/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/Users/marymaciejewski/git/node/vidly/node_modules/express/lib/router/layer.js:95:5)"}
{"level":"error","message":"Cannot set headers after they are sent to the clientCannot set headers after they are sent to the client","stack":"Error [ERR_HTTP_HEADERS_SENT]: Cannot set headers after they are sent to the client\n    at ServerResponse.setHeader (_http_outgoing.js:467:11)\n    at ServerResponse.header (/Users/marymaciejewski/git/node/vidly/node_modules/express/lib/response.js:767:10)\n    at ServerResponse.send (/Users/marymaciejewski/git/node/vidly/node_modules/express/lib/response.js:170:12)\n    at send (/Users/marymaciejewski/git/node/vidly/routes/genres.js:40:9)\n    at processTicksAndRejections (internal/process/task_queues.js:88:5)"}
{"message":"Connected to mongodb://localhost/vidly...","level":"info"}
